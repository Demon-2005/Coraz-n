<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>‚ù§Ô∏è</title>
    <link rel="stylesheet" href="Para_Dedicar_CSS.css">
</head>

<body>

<div id="app">

    <div id="heart"></div>

    <div id="text">
        Cada vez que te veo,<br>
        tu sonrisa me enamora m√°s<br>

        <div id="name">
            <span class="butterfly left">ü¶ã</span>
            <span class="name-text">Brisa</span>
            <span class="butterfly right">ü¶ã</span>
        </div>
    </div>

</div>

<script>
const app = document.getElementById("app");
const heart = document.getElementById("heart");

/* =========================
   MINI CORAZONES
========================= */
function spawnMiniHearts() {
    const rect = heart.getBoundingClientRect();
    const mini = document.createElement("div");

    mini.className = "mini-heart";
    mini.textContent = "üíó";
    mini.style.left = rect.left + rect.width / 2 + "px";
    mini.style.top = rect.top + 10 + "px";

    document.body.appendChild(mini);
    setTimeout(() => mini.remove(), 1800);
}

let heartInterval = setInterval(spawnMiniHearts, 500);

function stopHearts() {
    clearInterval(heartInterval);
    document.querySelectorAll(".mini-heart").forEach(h => h.remove());
}

/* =========================
   CLICK EN BRISA
========================= */
document.getElementById("name").addEventListener("click", () => {
    stopHearts();
    app.style.opacity = "0";

    setTimeout(() => {
        app.innerHTML = `
            <div class="final">
                <h1>üå∏</h1>
                <p class="final-text">Esto es solo el comienzo‚Ä¶</p>
                <button id="continue">¬øTe gustaria seguir?</button>
            </div>
        `;
        app.style.opacity = "1";

        document.getElementById("continue")
            .addEventListener("click", showCountdown);
    }, 800);
});

/* =========================
   CONTADOR
========================= */
function showCountdown() {
    app.style.opacity = "0";

    setTimeout(() => {
        app.innerHTML = `
            <div class="final">
                <p class="final-text">
                    A veces lo simple<br>
                    es lo que m√°s se queda.
                </p>
                <div id="timer">5</div>
            </div>
        `;
        app.style.opacity = "1";
        startCountdown();
    }, 600);
}

function startCountdown() {
    let time = 5;
    const timer = document.getElementById("timer");

    const countdown = setInterval(() => {
        time--;
        timer.textContent = time;

        if (time === 0) {
            clearInterval(countdown);
            showProposal();
        }
    }, 1000);
}

/* =========================
   PROPUESTA
========================= */
function showProposal() {
    app.innerHTML = `
        <div class="final">
            <img src="foto_1.jpg" class="proposal-img" alt="Foto especial">

            <p class="final-text">¬øQuer√©s ser mi novia?</p>

            <div class="buttons">
                <button onclick="sayYes()">S√≠ üíñ</button>
                <button id="noBtn">No üò∂</button>
            </div>

            <p id="response"></p>
        </div>
    `;

    document.getElementById("noBtn")
        .addEventListener("click", sayNo);
}

/* =========================
   RESPUESTAS
========================= */
function sayYes() {
    document.getElementById("response").textContent =
        "Entonces prometo cuidarte, elegirte y hacerte re√≠r incluso en los d√≠as grises üíï";

setTimeout(() => {
    app.style.opacity = "0";
    setTimeout(showEnvelope, 600);
}, 2000);
}

let noIndex = 0;

const noQuestions = [
    "¬øPor qu√© no?",
    "¬øEst√°s segura?",
    "Pensalo otra vez‚Ä¶",
    "Mir√° que no muerdo üòÖ",
    "Dale, no seas mala",
    "√öltima oportunidad‚Ä¶"
];

function sayNo() {
    const response = document.getElementById("response");

    response.textContent = noQuestions[noIndex];

    noIndex++;

    if (noIndex === noQuestions.length) {
        setTimeout(() => {
            noIndex = 0;
            restartLoop();
        }, 1200);
    }
}

/* =========================
   SOBRE
========================= */
function showEnvelope() {
    app.style.opacity = "0";

    setTimeout(() => {
        app.innerHTML = `
            <div class="envelope-screen">
                <div class="envelope" id="envelope">
                    <div class="envelope-body"></div>
                    <div class="envelope-heart">‚ù§Ô∏è</div>
                </div>
                <p class="hint">Toc√° el sobre</p>
            </div>
        `;

        app.style.opacity = "1";

        document.getElementById("envelope")
            .addEventListener("click", showMessage);
    }, 600);
}

/* =========================
   MENSAJE FINAL
========================= */
function showMessage() {
    app.style.opacity = "0";

    setTimeout(() => {
        app.innerHTML = `
            <div class="message-page">
    <div class="message-sheet">
        <p class="message-title"><strong>Para Brisa</strong></p>

        <div class="message-text">
            <p>S√© que quer√©s irte de misi√≥n, s√© que ten√©s algunos problemas de salud y, te digo la verdad, me da igual.</p>

            <p>Me gust√°s, y no te lo voy a negar. Hay algo en tu sonrisa, en tu personalidad, en tu voz, que me vuelve loco.</p>

            <p>No quer√≠a decirte nada para no ser una molestia, pero quiero que sepas que estoy feliz de tu decisi√≥n.</p>

            <p>Estoy dispuesto a esperarte dos a√±os si es necesario.</p>

            <p>Lo importante es que est√°s leyendo esto. Y eso me alegra bastante.</p>

            <p>Cuidate. En serio. Con lo que com√©s, con lo que tom√°s, y hac√©le caso a los m√©dicos.</p>
        </div>
    </div>
</div>
        `;

        app.style.opacity = "1";
    }, 600);
}
    
    function restartLoop() {
    app.style.opacity = "0";

    setTimeout(() => {
        app.innerHTML = `
            <div class="final">
                <h1>üå∏</h1>
                <p class="final-text">Esto es solo el comienzo‚Ä¶</p>
                <button id="continue">¬øTe gustar√≠a seguir?</button>
            </div>
        `;

        app.style.opacity = "1";

        document
            .getElementById("continue")
            .addEventListener("click", showCountdown);
    }, 800);
}
    
</script>

</body>
</html>